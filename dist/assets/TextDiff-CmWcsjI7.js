import{r as e,k as t,l,m as s,n,z as a,A as r,t as o,F as d,q as i,p as c}from"./vendor-BAdfJYHu.js";const g={class:"space-y-6"},u={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},x={class:"space-y-4"},v={class:"text-sm text-gray-600"},p={class:"space-y-4"},b={class:"text-sm text-gray-600"},y={class:"text-center"},m=["disabled"],h={key:0,class:"space-y-4"},f={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},w={class:"bg-red-50 p-4 rounded-lg text-center"},k={class:"text-2xl font-bold text-red-600"},C={class:"bg-green-50 p-4 rounded-lg text-center"},$={class:"text-2xl font-bold text-green-600"},N={class:"bg-blue-50 p-4 rounded-lg text-center"},M={class:"text-2xl font-bold text-blue-600"},j={class:"bg-purple-50 p-4 rounded-lg text-center"},U={class:"text-2xl font-bold text-purple-600"},V={class:"bg-gray-900 text-white p-4 rounded-lg overflow-auto"},_={class:"font-mono text-sm whitespace-pre-wrap"},q={key:1,class:"space-y-4"},z={class:"space-y-2"},A={class:"flex items-start space-x-4"},D={class:"text-sm font-mono text-gray-500 w-8 flex-shrink-0"},F={class:"text-sm font-mono flex-1"},T={key:0,class:"text-red-300 bg-red-900/50 px-1 rounded"},B={key:1,class:"text-green-300 bg-green-900/50 px-1 rounded"},E={key:2,class:"text-yellow-300 bg-yellow-900/50 px-1 rounded"},G={key:3,class:"text-gray-300"},H={class:"space-y-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J=["onClick"],K={class:"font-medium text-gray-900"},L={class:"text-sm text-gray-600 mt-1"},O={__name:"TextDiff",setup(O){const P=e(""),Q=e(""),R=e(null),S=e([]),W=e([{name:"代码对比",description:"两段相似的代码",text1:"function add(a, b) {\n  return a + b;\n}",text2:"function add(a, b) {\n  const result = a + b;\n  return result;\n}"},{name:"文档对比",description:"文档内容的变化",text1:"这是一个简单的文档。\n它包含一些基本内容。",text2:"这是一个更新的文档。\n它包含一些修改后的内容。\n还添加了新的段落。"},{name:"配置对比",description:"配置文件的变化",text1:"server {\n  port: 3000\n  host: localhost\n}",text2:"server {\n  port: 8080\n  host: 0.0.0.0\n  ssl: true\n}"}]),X=()=>{if(!P.value||!Q.value)return;const e=P.value.split("\n"),t=Q.value.split("\n"),l=Y(e,t),s=Z(e,t);R.value=l,S.value=s},Y=(e,t)=>{const l=Math.max(e.length,t.length);let s=0,n=0,a=0,r="";for(let i=0;i<l;i++){const l=e[i]||"",o=t[i]||"";i>=e.length?(r+=`+ ${o}\n`,n++):i>=t.length?(r+=`- ${l}\n`,s++):l===o?r+=`  ${l}\n`:(r+=`- ${l}\n`,r+=`+ ${o}\n`,a++)}const o=Math.max(e.length,t.length),d=o-s-n-a;return{deletions:s,additions:n,changes:a,similarity:o>0?Math.round(d/o*100):100,display:r.trim()}},Z=(e,t)=>{const l=[],s=Math.max(e.length,t.length);for(let n=0;n<s;n++){const s=e[n]||"",a=t[n]||"";n>=e.length?l.push({lineNumber:n+1,type:"added",content:a}):n>=t.length?l.push({lineNumber:n+1,type:"deleted",content:s}):s===a?l.push({lineNumber:n+1,type:"unchanged",content:s}):l.push({lineNumber:n+1,type:"modified",content:`${s} → ${a}`})}return l},ee=()=>{P.value="这是第一段文本。\n它包含一些内容。\n用于测试对比功能。"},te=()=>{Q.value="这是第二段文本。\n它包含修改后的内容。\n用于测试对比功能。\n还添加了新的行。"},le=()=>{P.value="",R.value=null,S.value=[]},se=()=>{Q.value="",R.value=null,S.value=[]};return(e,O)=>(l(),t("div",g,[s("div",u,[s("div",x,[s("div",{class:"flex items-center justify-between"},[O[2]||(O[2]=s("h3",{class:"text-lg font-semibold text-gray-900"},"原始文本",-1)),s("div",{class:"flex space-x-2"},[s("button",{onClick:le,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"}," 清空 "),s("button",{onClick:ee,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," 示例1 ")])]),a(s("textarea",{"onUpdate:modelValue":O[0]||(O[0]=e=>P.value=e),placeholder:"输入第一段文本...",class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[r,P.value]]),s("div",v," 字符数: "+o(P.value.length)+" | 行数: "+o(P.value.split("\n").length),1)]),s("div",p,[s("div",{class:"flex items-center justify-between"},[O[3]||(O[3]=s("h3",{class:"text-lg font-semibold text-gray-900"},"对比文本",-1)),s("div",{class:"flex space-x-2"},[s("button",{onClick:se,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"}," 清空 "),s("button",{onClick:te,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," 示例2 ")])]),a(s("textarea",{"onUpdate:modelValue":O[1]||(O[1]=e=>Q.value=e),placeholder:"输入第二段文本...",class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,512),[[r,Q.value]]),s("div",b," 字符数: "+o(Q.value.length)+" | 行数: "+o(Q.value.split("\n").length),1)])]),s("div",y,[s("button",{onClick:X,disabled:!P.value||!Q.value,class:"px-8 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium"}," 开始对比 ",8,m)]),R.value?(l(),t("div",h,[O[8]||(O[8]=s("h3",{class:"text-lg font-semibold text-gray-900"},"对比结果",-1)),s("div",f,[s("div",w,[s("div",k,o(R.value.deletions),1),O[4]||(O[4]=s("div",{class:"text-sm text-gray-600"},"删除行",-1))]),s("div",C,[s("div",$,o(R.value.additions),1),O[5]||(O[5]=s("div",{class:"text-sm text-gray-600"},"新增行",-1))]),s("div",N,[s("div",M,o(R.value.changes),1),O[6]||(O[6]=s("div",{class:"text-sm text-gray-600"},"修改行",-1))]),s("div",j,[s("div",U,o(R.value.similarity)+"%",1),O[7]||(O[7]=s("div",{class:"text-sm text-gray-600"},"相似度",-1))])]),s("div",V,[s("div",_,o(R.value.display),1)])])):n("",!0),S.value.length>0?(l(),t("div",q,[O[9]||(O[9]=s("h3",{class:"text-lg font-semibold text-gray-900"},"逐行对比",-1)),s("div",z,[(l(!0),t(d,null,i(S.value,(e,n)=>{return l(),t("div",{key:n,class:c(["p-3 rounded-lg",(a=e.type,{deleted:"bg-red-50 border-l-4 border-red-400",added:"bg-green-50 border-l-4 border-green-400",modified:"bg-yellow-50 border-l-4 border-yellow-400",unchanged:"bg-gray-50"}[a]||"bg-gray-50")])},[s("div",A,[s("div",D,o(e.lineNumber),1),s("div",F,["deleted"===e.type?(l(),t("span",T," - "+o(e.content),1)):"added"===e.type?(l(),t("span",B," + "+o(e.content),1)):"modified"===e.type?(l(),t("span",E," ~ "+o(e.content),1)):(l(),t("span",G,o(e.content),1))])])],2);var a}),128))])])):n("",!0),s("div",H,[O[10]||(O[10]=s("h3",{class:"text-lg font-semibold text-gray-900"},"示例文本",-1)),s("div",I,[(l(!0),t(d,null,i(W.value,e=>(l(),t("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:t=>(e=>{P.value=e.text1,Q.value=e.text2,X()})(e)},[s("div",K,o(e.name),1),s("div",L,o(e.description),1)],8,J))),128))])])]))}};export{O as default};
