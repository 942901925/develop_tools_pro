import{r as e,c as t,k as r,l as a,m as l,z as s,n,t as o,u as i,A as c,F as u,q as d}from"./vendor-BOWHWpaN.js";import{u as m}from"./index-3NlzT2cr.js";import"./ui-DoE9cyLw.js";const g={class:"space-y-6"},v={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},p={class:"space-y-4"},x={class:"flex items-center justify-between"},y={class:"text-lg font-semibold text-gray-900"},b={class:"flex space-x-2"},f=["placeholder"],h={key:0,class:"text-red-600 text-sm"},j={class:"space-y-4"},C={class:"flex items-center justify-between"},Y={class:"text-lg font-semibold text-gray-900"},w={class:"w-full h-64 p-4 bg-gray-100 border border-gray-300 rounded-lg overflow-auto text-sm"},k={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},O={class:"space-y-4"},$={class:"flex items-center justify-between"},A={class:"text-lg font-semibold text-gray-900"},N={class:"flex space-x-2"},J=["placeholder"],D={key:0,class:"text-red-600 text-sm"},F={class:"space-y-4"},S={class:"flex items-center justify-between"},E={class:"text-lg font-semibold text-gray-900"},T={class:"w-full h-64 p-4 bg-gray-100 border border-gray-300 rounded-lg overflow-auto text-sm"},z={class:"space-y-4"},I={class:"text-lg font-semibold text-gray-900"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M=["onClick"],U={class:"font-medium text-gray-900"},V={class:"text-sm text-gray-600 mt-1"},_={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},q={class:"bg-blue-50 p-4 rounded-lg text-center"},L={class:"text-2xl font-bold text-blue-600"},R={class:"text-sm text-gray-600"},B={class:"bg-green-50 p-4 rounded-lg text-center"},G={class:"text-2xl font-bold text-green-600"},H={class:"text-sm text-gray-600"},K={class:"bg-purple-50 p-4 rounded-lg text-center"},P={class:"text-2xl font-bold text-purple-600"},Q={class:"text-sm text-gray-600"},X={class:"bg-orange-50 p-4 rounded-lg text-center"},Z={class:"text-2xl font-bold text-orange-600"},ee={class:"text-sm text-gray-600"},te={__name:"JsonYamlConverter",setup(te){const{t:re}=m(),ae=e(""),le=e(""),se=e(""),ne=e(""),oe=e(""),ie=e(""),ce=t(()=>[{name:re("jsonYamlConverter.examples.simpleObject.name"),description:re("jsonYamlConverter.examples.simpleObject.description"),json:'{"name": "张三", "age": 25, "city": "北京"}',yaml:"name: 张三\nage: 25\ncity: 北京"},{name:re("jsonYamlConverter.examples.nestedObject.name"),description:re("jsonYamlConverter.examples.nestedObject.description"),json:'{"user": {"name": "李四", "profile": {"email": "li@example.com", "phone": "13800138000"}}, "settings": {"theme": "dark", "language": "zh-CN"}}',yaml:'user:\n  name: 李四\n  profile:\n    email: li@example.com\n    phone: "13800138000"\nsettings:\n  theme: dark\n  language: zh-CN'},{name:re("jsonYamlConverter.examples.arrayData.name"),description:re("jsonYamlConverter.examples.arrayData.description"),json:'{"items": ["苹果", "香蕉", "橙子"], "counts": [5, 3, 8], "metadata": {"total": 16, "categories": ["水果"]}}',yaml:"items:\n  - 苹果\n  - 香蕉\n  - 橙子\ncounts:\n  - 5\n  - 3\n  - 8\nmetadata:\n  total: 16\n  categories:\n    - 水果"}]),ue=t(()=>0===ae.value.length||0===le.value.length?0:Math.round(le.value.length/ae.value.length*100)),de=t(()=>!(!oe.value&&!ie.value)),me=()=>{try{const e=JSON.parse(ae.value);le.value=ve(e),oe.value=""}catch(e){oe.value=re("jsonYamlConverter.jsonFormatError")+": "+e.message,le.value=""}},ge=()=>{try{const e=pe(se.value);ne.value=JSON.stringify(e,null,2),ie.value=""}catch(e){ie.value=re("jsonYamlConverter.yamlFormatError")+": "+e.message,ne.value=""}},ve=(e,t=0)=>{const r="  ".repeat(t);if(null===e)return"null";if("string"==typeof e)return`"${e}"`;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(Array.isArray(e))return 0===e.length?"[]":e.map(e=>`${r}- ${ve(e,t+1)}`).join("\n");if("object"==typeof e){const a=Object.entries(e);return 0===a.length?"{}":a.map(([e,a])=>{const l=ve(a,t+1);return"object"!=typeof a||null===a||Array.isArray(a)?`${r}${e}: ${l}`:`${r}${e}:\n${l}`}).join("\n")}return e.toString()},pe=e=>{const t=e.split("\n"),r={},a=[{obj:r,indent:-1}];for(const l of t){if(""===l.trim())continue;const e=l.search(/\S/),t=l.trim();for(;a.length>1&&a[a.length-1].indent>=e;)a.pop();const r=a[a.length-1].obj;if(t.startsWith("- ")){if(!Array.isArray(r))throw new Error("Invalid YAML: array item in non-array context");const e=xe(t.substring(2));r.push(e)}else if(t.includes(":")){const[l,...s]=t.split(":"),n=l.trim(),o=s.join(":").trim();if(""===o){const t={};r[n]=t,a.push({obj:t,indent:e})}else r[n]=xe(o)}}return r},xe=e=>"null"===(e=e.trim())?null:"true"===e||"false"!==e&&(e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):isNaN(e)||isNaN(parseFloat(e))?e:parseFloat(e)),ye=()=>{ae.value="",le.value="",oe.value=""},be=()=>{se.value="",ne.value="",ie.value=""},fe=async()=>{try{await navigator.clipboard.writeText(le.value)}catch(e){console.error("复制失败:",e)}},he=async()=>{try{await navigator.clipboard.writeText(ne.value)}catch(e){console.error("复制失败:",e)}};return(e,t)=>(a(),r("div",g,[l("div",v,[l("div",p,[l("div",x,[l("h3",y,o(i(re)("jsonYamlConverter.jsonInput")),1),l("div",b,[l("button",{onClick:me,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},o(i(re)("jsonYamlConverter.jsonToYaml")),1),l("button",{onClick:ye,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},o(i(re)("jsonYamlConverter.clear")),1)])]),s(l("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>ae.value=e),placeholder:i(re)("jsonYamlConverter.enterJsonData"),class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,f),[[c,ae.value]]),oe.value?(a(),r("div",h,o(oe.value),1)):n("",!0)]),l("div",j,[l("div",C,[l("h3",Y,o(i(re)("jsonYamlConverter.yamlOutput")),1),l("button",{onClick:fe,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"},o(i(re)("jsonYamlConverter.copyYaml")),1)]),l("pre",w,o(le.value),1)])]),l("div",k,[l("div",O,[l("div",$,[l("h3",A,o(i(re)("jsonYamlConverter.yamlInput")),1),l("div",N,[l("button",{onClick:ge,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"},o(i(re)("jsonYamlConverter.yamlToJson")),1),l("button",{onClick:be,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},o(i(re)("jsonYamlConverter.clear")),1)])]),s(l("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>se.value=e),placeholder:i(re)("jsonYamlConverter.enterYamlData"),class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,8,J),[[c,se.value]]),ie.value?(a(),r("div",D,o(ie.value),1)):n("",!0)]),l("div",F,[l("div",S,[l("h3",E,o(i(re)("jsonYamlConverter.jsonOutput")),1),l("button",{onClick:he,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"},o(i(re)("jsonYamlConverter.copyJson")),1)]),l("pre",T,o(ne.value),1)])]),l("div",z,[l("h3",I,o(i(re)("jsonYamlConverter.exampleData")),1),l("div",W,[(a(!0),r(u,null,d(ce.value,e=>(a(),r("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:t=>(e=>{ae.value=e.json,se.value=e.yaml,me(),ge()})(e)},[l("div",U,o(e.name),1),l("div",V,o(e.description),1)],8,M))),128))])]),l("div",_,[l("div",q,[l("div",L,o(ae.value.length),1),l("div",R,o(i(re)("jsonYamlConverter.jsonCharCount")),1)]),l("div",B,[l("div",G,o(se.value.length),1),l("div",H,o(i(re)("jsonYamlConverter.yamlCharCount")),1)]),l("div",K,[l("div",P,o(ue.value)+"%",1),l("div",Q,o(i(re)("jsonYamlConverter.conversionRatio")),1)]),l("div",X,[l("div",Z,o(de.value?i(re)("jsonYamlConverter.hasError"):i(re)("jsonYamlConverter.normal")),1),l("div",ee,o(i(re)("jsonYamlConverter.status")),1)])])]))}};export{te as default};
