import{r as e,c as t,o as a,b as l,k as s,l as r,m as i,n,z as d,A as o,F as u,q as c,t as g,N as v}from"./vendor-II1aCFjQ.js";const m={class:"space-y-6"},x={class:"bg-gradient-to-r from-red-50 to-orange-50 p-6 rounded-lg"},b={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},y={class:"space-y-4"},p={class:"space-y-4"},f={class:"grid grid-cols-2 gap-2"},h=["onClick"],w={class:"flex space-x-2"},S=["disabled"],k=["disabled"],M={key:0,class:"space-y-4"},D={class:"text-lg font-semibold text-gray-900"},C={class:"bg-gray-900 text-white p-8 rounded-lg text-center"},T={key:0,class:"space-y-4"},$={class:"text-6xl font-bold font-mono"},I={class:"text-lg text-gray-300"},N={key:1,class:"space-y-4"},O={class:"space-y-2"},j={class:"flex justify-between text-sm text-gray-600"},z={class:"w-full bg-gray-200 rounded-full h-2"},F={class:"space-y-4"},H={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},J=["onClick"],L={class:"font-medium text-gray-900"},U={class:"text-sm text-gray-600"},V={class:"text-xs text-gray-500 mt-1"},_={key:1,class:"space-y-4"},q={class:"space-y-2"},A={class:"font-medium"},B={class:"text-sm text-gray-600"},E={class:"text-sm text-gray-500"},G={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},K={class:"bg-red-50 p-4 rounded-lg text-center"},P={class:"text-2xl font-bold text-red-600"},Q={class:"bg-orange-50 p-4 rounded-lg text-center"},R={class:"text-2xl font-bold text-orange-600"},W={class:"bg-green-50 p-4 rounded-lg text-center"},X={class:"text-2xl font-bold text-green-600"},Y={class:"bg-blue-50 p-4 rounded-lg text-center"},Z={class:"text-2xl font-bold text-blue-600"},ee={__name:"CountdownTimer",setup(ee){const te=e(""),ae=e(""),le=e(!1),se=e(0),re=e(""),ie=e([]),ne=e([{name:"5分钟",minutes:5},{name:"10分钟",minutes:10},{name:"30分钟",minutes:30},{name:"1小时",minutes:60},{name:"2小时",minutes:120},{name:"1天",minutes:1440}]),de=e([{name:"工作休息",description:"25分钟专注工作",duration:"25分钟",minutes:25},{name:"短休息",description:"5分钟短暂休息",duration:"5分钟",minutes:5},{name:"长休息",description:"15分钟长休息",duration:"15分钟",minutes:15},{name:"运动时间",description:"30分钟运动",duration:"30分钟",minutes:30},{name:"学习时间",description:"45分钟学习",duration:"45分钟",minutes:45},{name:"会议时间",description:"1小时会议",duration:"1小时",minutes:60}]);let oe=null;const ue=t(()=>{if(!re.value||!te.value)return 0;const e=new Date(te.value).getTime()-new Date(re.value).getTime(),t=se.value;return Math.max(0,Math.min(100,(e-t)/e*100))}),ce=t(()=>ie.value.length),ge=t(()=>ie.value.filter(e=>e.completed).length),ve=t(()=>Math.round(ie.value.reduce((e,t)=>e+t.durationMinutes,0)/60*10)/10),me=()=>{if(!te.value)return void alert("请选择目标时间");const e=new Date(te.value),t=new Date;e<=t?alert("目标时间必须大于当前时间"):(re.value=t.toISOString().slice(0,16),le.value=!0,se.value=e.getTime()-t.getTime(),oe=setInterval(()=>{const e=new Date,t=new Date(te.value);se.value=t.getTime()-e.getTime(),se.value<=0&&(xe(),fe(!0))},1e3))},xe=()=>{le.value=!1,oe&&(clearInterval(oe),oe=null),se.value>0&&fe(!1)},be=e=>{const t=new Date((new Date).getTime()+60*e.minutes*1e3);te.value=t.toISOString().slice(0,16)},ye=e=>{const t=Math.max(0,Math.ceil(e/1e3)),a=Math.floor(t/86400),l=Math.floor(t%86400/3600),s=Math.floor(t%3600/60),r=t%60;return a>0?`${a}天 ${l.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${l.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},pe=e=>{if(!e)return"";return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},fe=e=>{const t=Math.ceil((new Date(te.value).getTime()-new Date(re.value).getTime())/6e4);ie.value.unshift({title:ae.value||"倒计时",duration:`${t}分钟`,durationMinutes:t,completed:e,date:(new Date).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),ie.value.length>20&&(ie.value=ie.value.slice(0,20))},he=()=>{ie.value=[]};return a(()=>{const e=localStorage.getItem("countdownHistory");if(e)try{ie.value=JSON.parse(e)}catch(t){console.error("Failed to load history:",t)}}),l(()=>{oe&&clearInterval(oe),localStorage.setItem("countdownHistory",JSON.stringify(ie.value))}),(e,t)=>(r(),s("div",m,[i("div",x,[t[5]||(t[5]=i("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"倒计时设置",-1)),i("div",b,[i("div",y,[i("div",null,[t[2]||(t[2]=i("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"目标时间",-1)),d(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>te.value=e),type:"datetime-local",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[o,te.value]])]),i("div",null,[t[3]||(t[3]=i("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"倒计时标题",-1)),d(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>ae.value=e),placeholder:"输入倒计时标题",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[o,ae.value]])])]),i("div",p,[i("div",null,[t[4]||(t[4]=i("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"快速设置",-1)),i("div",f,[(r(!0),s(u,null,c(ne.value,e=>(r(),s("button",{key:e.name,onClick:t=>be(e),class:"p-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},g(e.name),9,h))),128))])]),i("div",w,[i("button",{onClick:me,disabled:!te.value||le.value,class:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},g(le.value?"运行中...":"开始倒计时"),9,S),i("button",{onClick:xe,disabled:!le.value,class:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"}," 停止 ",8,k)])])])]),le.value||se.value?(r(),s("div",M,[i("h3",D,g(ae.value||"倒计时"),1),i("div",C,[se.value>0?(r(),s("div",T,[i("div",$,g(ye(se.value)),1),i("div",I,g(pe(te.value)),1)])):(r(),s("div",N,[...t[6]||(t[6]=[i("div",{class:"text-6xl font-bold text-red-400"},"时间到！",-1),i("div",{class:"text-lg text-gray-300"},"倒计时已结束",-1)])]))]),i("div",O,[i("div",j,[i("span",null,"开始时间: "+g(pe(re.value)),1),i("span",null,"剩余时间: "+g(Math.max(0,Math.ceil(se.value/1e3)))+"秒",1)]),i("div",z,[i("div",{class:"bg-red-500 h-2 rounded-full transition-all duration-1000",style:v({width:ue.value+"%"})},null,4)])])])):n("",!0),i("div",F,[t[7]||(t[7]=i("h3",{class:"text-lg font-semibold text-gray-900"},"预设倒计时",-1)),i("div",H,[(r(!0),s(u,null,c(de.value,e=>(r(),s("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:t=>(e=>{ae.value=e.name,be(e)})(e)},[i("div",L,g(e.name),1),i("div",U,g(e.description),1),i("div",V,g(e.duration),1)],8,J))),128))])]),ie.value.length>0?(r(),s("div",_,[t[8]||(t[8]=i("h3",{class:"text-lg font-semibold text-gray-900"},"历史记录",-1)),i("div",q,[(r(!0),s(u,null,c(ie.value,(e,t)=>(r(),s("div",{key:t,class:"p-3 bg-gray-50 rounded-lg flex justify-between items-center"},[i("div",null,[i("div",A,g(e.title),1),i("div",B,g(e.duration),1)]),i("div",E,g(e.date),1)]))),128))]),i("button",{onClick:he,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"}," 清空历史 ")])):n("",!0),i("div",G,[i("div",K,[i("div",P,g(ce.value),1),t[9]||(t[9]=i("div",{class:"text-sm text-gray-600"},"总倒计时",-1))]),i("div",Q,[i("div",R,g(ge.value),1),t[10]||(t[10]=i("div",{class:"text-sm text-gray-600"},"已完成",-1))]),i("div",W,[i("div",X,g(ve.value),1),t[11]||(t[11]=i("div",{class:"text-sm text-gray-600"},"总时长(小时)",-1))]),i("div",Y,[i("div",Z,g(le.value?"运行中":"已停止"),1),t[12]||(t[12]=i("div",{class:"text-sm text-gray-600"},"当前状态",-1))])])]))}};export{ee as default};
