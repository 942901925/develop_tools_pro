import{r as e,c as a,k as s,l,m as r,n as t,t as o,u as i,p as n,P as u,j as m,z as d,A as c}from"./vendor-BOWHWpaN.js";import{u as g}from"./index-3NlzT2cr.js";import{I as p}from"./ui-DoE9cyLw.js";const v={class:"space-y-6"},h={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},y={class:"space-y-4"},f={class:"text-lg font-semibold text-gray-900"},x={class:"space-y-4"},b={class:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center"},C={class:"text-lg font-medium text-gray-900"},w={class:"text-sm text-gray-500"},k={key:0,class:"space-y-4"},I={class:"font-medium text-gray-900"},z={class:"space-y-3"},M={class:"block text-sm font-medium text-gray-700 mb-1"},j={class:"block text-sm font-medium text-gray-700 mb-1"},B={class:"block text-sm font-medium text-gray-700 mb-1"},R=["disabled"],D={class:"space-y-4"},U={class:"text-lg font-semibold text-gray-900"},F={key:0,class:"space-y-4"},S={class:"bg-gray-50 rounded-lg p-4"},_={class:"font-medium text-gray-900 mb-2"},A={class:"text-sm text-gray-600 space-y-1"},V={class:"mt-3"},W=["src"],E={key:0,class:"bg-green-50 rounded-lg p-4"},H={class:"font-medium text-gray-900 mb-2"},L={class:"text-sm text-gray-600 space-y-1"},T={class:"mt-3"},$=["src"],q={class:"mt-3 flex space-x-2"},G={__name:"ImageCompressor",setup(G){const{t:K}=g(),N=e(null),P=e(null),J=e(null),O=e(null),Q=e(!1),X=e(!1),Y=e(80),Z=e(800),ee=e(600),ae=e=>{const a=e.target.files[0];a&&a.type.startsWith("image/")&&le(a)},se=e=>{Q.value=!1;const a=e.dataTransfer.files[0];a&&a.type.startsWith("image/")&&le(a)},le=e=>{P.value=e;const a=new FileReader;a.onload=e=>{const a=new p;a.onload=()=>{J.value={src:e.target.result,width:a.width,height:a.height}},a.src=e.target.result},a.readAsDataURL(e)},re=()=>{if(!J.value)return;X.value=!0;const e=document.createElement("canvas"),a=e.getContext("2d"),s=new p;s.onload=()=>{let{width:l,height:r}=te(s.width,s.height);e.width=l,e.height=r,a.drawImage(s,0,0,l,r),e.toBlob(e=>{const a=new FileReader;a.onload=a=>{O.value={src:a.target.result,width:l,height:r,size:e.size},X.value=!1},a.readAsDataURL(e)},"image/jpeg",Y.value/100)},s.src=J.value.src},te=(e,a)=>{let s=e,l=a;return s>Z.value&&(l=l*Z.value/s,s=Z.value),l>ee.value&&(s=s*ee.value/l,l=ee.value),{width:Math.round(s),height:Math.round(l)}},oe=()=>{if(!O.value)return;const e=document.createElement("a");e.download=`compressed_${P.value.name}`,e.href=O.value.src,e.click()},ie=e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]},ne=a(()=>J.value&&O.value?Math.round(100*(1-O.value.size/P.value.size)):0);return(e,a)=>(l(),s("div",v,[r("div",h,[r("div",y,[r("h3",f,o(i(K)("imageCompressor.uploadImage")),1),r("div",{onDrop:se,onDragover:a[1]||(a[1]=u(()=>{},["prevent"])),onDragenter:a[2]||(a[2]=u(()=>{},["prevent"])),class:n(["border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors cursor-pointer",{"border-blue-500 bg-blue-50":Q.value}])},[r("input",{ref_key:"fileInput",ref:N,type:"file",accept:"image/*",onChange:ae,class:"hidden"},null,544),r("div",x,[r("div",b,[m(i(p),{class:"w-8 h-8 text-gray-400"})]),r("div",null,[r("p",C,o(i(K)("imageCompressor.dragImageHere")),1),r("p",w,o(i(K)("imageCompressor.orClickToSelect")),1)]),r("button",{onClick:a[0]||(a[0]=a=>e.$refs.fileInput.click()),class:"btn-primary"},o(i(K)("imageCompressor.selectImage")),1)])],34),P.value?(l(),s("div",k,[r("h4",I,o(i(K)("imageCompressor.compressionSettings")),1),r("div",z,[r("div",null,[r("label",M,o(i(K)("imageCompressor.quality"))+" ("+o(Y.value)+"%)",1),d(r("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>Y.value=e),type:"range",min:"10",max:"100",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[c,Y.value]])]),r("div",null,[r("label",j,o(i(K)("imageCompressor.maxWidth"))+" ("+o(Z.value)+"px)",1),d(r("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>Z.value=e),type:"range",min:"100",max:"2000",step:"50",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[c,Z.value]])]),r("div",null,[r("label",B,o(i(K)("imageCompressor.maxHeight"))+" ("+o(ee.value)+"px)",1),d(r("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>ee.value=e),type:"range",min:"100",max:"2000",step:"50",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[c,ee.value]])])]),r("button",{onClick:re,disabled:X.value,class:"btn-primary w-full"},o(X.value?i(K)("imageCompressor.compressing"):i(K)("imageCompressor.startCompression")),9,R)])):t("",!0)]),r("div",D,[r("h3",U,o(i(K)("imageCompressor.previewResult")),1),J.value?(l(),s("div",F,[r("div",S,[r("h4",_,o(i(K)("imageCompressor.originalImageInfo")),1),r("div",A,[r("p",null,o(i(K)("imageCompressor.fileName"))+": "+o(P.value.name),1),r("p",null,o(i(K)("imageCompressor.fileSize"))+": "+o(ie(P.value.size)),1),r("p",null,o(i(K)("imageCompressor.dimensions"))+": "+o(J.value.width)+" × "+o(J.value.height),1)]),r("div",V,[r("img",{src:J.value.src,class:"max-w-full h-auto rounded border"},null,8,W)])]),O.value?(l(),s("div",E,[r("h4",H,o(i(K)("imageCompressor.compressedImageInfo")),1),r("div",L,[r("p",null,o(i(K)("imageCompressor.fileSize"))+": "+o(ie(O.value.size)),1),r("p",null,o(i(K)("imageCompressor.dimensions"))+": "+o(O.value.width)+" × "+o(O.value.height),1),r("p",null,o(i(K)("imageCompressor.compressionRatio"))+": "+o(ne.value)+"%",1)]),r("div",T,[r("img",{src:O.value.src,class:"max-w-full h-auto rounded border"},null,8,$)]),r("div",q,[r("button",{onClick:oe,class:"btn-primary flex-1"},o(i(K)("imageCompressor.downloadCompressed")),1)])])):t("",!0)])):t("",!0)])])]))}};export{G as default};
