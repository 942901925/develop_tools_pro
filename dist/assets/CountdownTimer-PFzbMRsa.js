import{r as e,c as t,o as n,b as o,k as a,l as s,m as r,n as l,t as i,u as d,C as u,D as c,F as g,q as m,P as v}from"./vendor-Bj4vQ21v.js";import{u as w}from"./index-D0OvHsGD.js";import"./ui-a1y1iJBQ.js";const x={class:"space-y-6"},p={class:"bg-gradient-to-r from-red-50 to-orange-50 p-6 rounded-lg"},y={class:"text-lg font-semibold text-gray-900 mb-4"},b={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={class:"space-y-4"},f={class:"block text-sm font-medium text-gray-700 mb-2"},h={class:"block text-sm font-medium text-gray-700 mb-2"},k=["placeholder"],D={class:"space-y-4"},S={class:"block text-sm font-medium text-gray-700 mb-2"},P={class:"grid grid-cols-2 gap-2"},M=["onClick"],C={class:"flex space-x-2"},B=["disabled"],$=["disabled"],I={key:0,class:"space-y-4"},j={class:"text-lg font-semibold text-gray-900"},H={class:"bg-gray-900 text-white p-8 rounded-lg text-center"},N={key:0,class:"space-y-4"},O={class:"text-6xl font-bold font-mono"},U={class:"text-lg text-gray-300"},q={key:1,class:"space-y-4"},z={class:"text-6xl font-bold text-red-400"},F={class:"text-lg text-gray-300"},J={class:"space-y-2"},L={class:"flex justify-between text-sm text-gray-600"},V={class:"w-full bg-gray-200 rounded-full h-2"},_={class:"space-y-4"},E={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},A=["onClick"],G={class:"font-medium text-gray-900"},K={class:"text-sm text-gray-600"},Q={class:"text-xs text-gray-500 mt-1"},R={key:1,class:"space-y-4"},W={class:"space-y-2"},X={class:"font-medium"},Y={class:"text-sm text-gray-600"},Z={class:"text-sm text-gray-500"},ee={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},te={class:"bg-red-50 p-4 rounded-lg text-center"},ne={class:"text-2xl font-bold text-red-600"},oe={class:"bg-orange-50 p-4 rounded-lg text-center"},ae={class:"text-2xl font-bold text-orange-600"},se={class:"bg-green-50 p-4 rounded-lg text-center"},re={class:"text-2xl font-bold text-green-600"},le={class:"bg-blue-50 p-4 rounded-lg text-center"},ie={class:"text-2xl font-bold text-blue-600"},de={__name:"CountdownTimer",setup(de){const{t:ue}=w(),ce=e(""),ge=e(""),me=e(!1),ve=e(0),we=e(""),xe=e([]),pe=t(()=>[{name:ue("countdownTimer.presets.fiveMinutes"),minutes:5},{name:ue("countdownTimer.presets.tenMinutes"),minutes:10},{name:ue("countdownTimer.presets.thirtyMinutes"),minutes:30},{name:ue("countdownTimer.presets.oneHour"),minutes:60},{name:ue("countdownTimer.presets.twoHours"),minutes:120},{name:ue("countdownTimer.presets.oneDay"),minutes:1440}]),ye=t(()=>[{name:ue("countdownTimer.countdownPresets.workBreak"),description:ue("countdownTimer.countdownPresets.workBreakDesc"),duration:ue("countdownTimer.countdownPresets.workBreakDuration"),minutes:25},{name:ue("countdownTimer.countdownPresets.shortBreak"),description:ue("countdownTimer.countdownPresets.shortBreakDesc"),duration:ue("countdownTimer.countdownPresets.shortBreakDuration"),minutes:5},{name:ue("countdownTimer.countdownPresets.longBreak"),description:ue("countdownTimer.countdownPresets.longBreakDesc"),duration:ue("countdownTimer.countdownPresets.longBreakDuration"),minutes:15},{name:ue("countdownTimer.countdownPresets.exercise"),description:ue("countdownTimer.countdownPresets.exerciseDesc"),duration:ue("countdownTimer.countdownPresets.exerciseDuration"),minutes:30},{name:ue("countdownTimer.countdownPresets.study"),description:ue("countdownTimer.countdownPresets.studyDesc"),duration:ue("countdownTimer.countdownPresets.studyDuration"),minutes:45},{name:ue("countdownTimer.countdownPresets.meeting"),description:ue("countdownTimer.countdownPresets.meetingDesc"),duration:ue("countdownTimer.countdownPresets.meetingDuration"),minutes:60}]);let be=null;const Te=t(()=>{if(!we.value||!ce.value)return 0;const e=new Date(ce.value).getTime()-new Date(we.value).getTime(),t=ve.value;return Math.max(0,Math.min(100,(e-t)/e*100))}),fe=t(()=>xe.value.length),he=t(()=>xe.value.filter(e=>e.completed).length),ke=t(()=>Math.round(xe.value.reduce((e,t)=>e+t.durationMinutes,0)/60*10)/10),De=()=>{if(!ce.value)return void alert("请选择目标时间");const e=new Date(ce.value),t=new Date;e<=t?alert("目标时间必须大于当前时间"):(we.value=t.toISOString().slice(0,16),me.value=!0,ve.value=e.getTime()-t.getTime(),be=setInterval(()=>{const e=new Date,t=new Date(ce.value);ve.value=t.getTime()-e.getTime(),ve.value<=0&&(Se(),Be(!0))},1e3))},Se=()=>{me.value=!1,be&&(clearInterval(be),be=null),ve.value>0&&Be(!1)},Pe=e=>{const t=new Date((new Date).getTime()+60*e.minutes*1e3);ce.value=t.toISOString().slice(0,16)},Me=e=>{const t=Math.max(0,Math.ceil(e/1e3)),n=Math.floor(t/86400),o=Math.floor(t%86400/3600),a=Math.floor(t%3600/60),s=t%60;return n>0?`${n}天 ${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},Ce=e=>{if(!e)return"";return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},Be=e=>{const t=Math.ceil((new Date(ce.value).getTime()-new Date(we.value).getTime())/6e4);xe.value.unshift({title:ge.value||"倒计时",duration:`${t}分钟`,durationMinutes:t,completed:e,date:(new Date).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),xe.value.length>20&&(xe.value=xe.value.slice(0,20))},$e=()=>{xe.value=[]};return n(()=>{const e=localStorage.getItem("countdownHistory");if(e)try{xe.value=JSON.parse(e)}catch(t){console.error("Failed to load history:",t)}}),o(()=>{be&&clearInterval(be),localStorage.setItem("countdownHistory",JSON.stringify(xe.value))}),(e,t)=>(s(),a("div",x,[r("div",p,[r("h3",y,i(d(ue)("countdownTimer.settings")),1),r("div",b,[r("div",T,[r("div",null,[r("label",f,i(d(ue)("countdownTimer.targetTime")),1),u(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>ce.value=e),type:"datetime-local",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[c,ce.value]])]),r("div",null,[r("label",h,i(d(ue)("countdownTimer.timerTitle")),1),u(r("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>ge.value=e),placeholder:d(ue)("countdownTimer.enterTitle"),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,8,k),[[c,ge.value]])])]),r("div",D,[r("div",null,[r("label",S,i(d(ue)("countdownTimer.quickSettings")),1),r("div",P,[(s(!0),a(g,null,m(pe.value,e=>(s(),a("button",{key:e.name,onClick:t=>Pe(e),class:"p-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},i(e.name),9,M))),128))])]),r("div",C,[r("button",{onClick:De,disabled:!ce.value||me.value,class:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},i(me.value?d(ue)("countdownTimer.running"):d(ue)("countdownTimer.start")),9,B),r("button",{onClick:Se,disabled:!me.value,class:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},i(d(ue)("countdownTimer.stop")),9,$)])])])]),me.value||ve.value?(s(),a("div",I,[r("h3",j,i(ge.value||d(ue)("countdownTimer.countdown")),1),r("div",H,[ve.value>0?(s(),a("div",N,[r("div",O,i(Me(ve.value)),1),r("div",U,i(Ce(ce.value)),1)])):(s(),a("div",q,[r("div",z,i(d(ue)("countdownTimer.timeUp")),1),r("div",F,i(d(ue)("countdownTimer.countdownEnded")),1)]))]),r("div",J,[r("div",L,[r("span",null,i(d(ue)("countdownTimer.startTime"))+": "+i(Ce(we.value)),1),r("span",null,i(d(ue)("countdownTimer.remainingTime"))+": "+i(Math.max(0,Math.ceil(ve.value/1e3)))+i(d(ue)("countdownTimer.seconds")),1)]),r("div",V,[r("div",{class:"bg-red-500 h-2 rounded-full transition-all duration-1000",style:v({width:Te.value+"%"})},null,4)])])])):l("",!0),r("div",_,[t[2]||(t[2]=r("h3",{class:"text-lg font-semibold text-gray-900"},"预设倒计时",-1)),r("div",E,[(s(!0),a(g,null,m(ye.value,e=>(s(),a("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:t=>(e=>{ge.value=e.name,Pe(e)})(e)},[r("div",G,i(e.name),1),r("div",K,i(e.description),1),r("div",Q,i(e.duration),1)],8,A))),128))])]),xe.value.length>0?(s(),a("div",R,[t[3]||(t[3]=r("h3",{class:"text-lg font-semibold text-gray-900"},"历史记录",-1)),r("div",W,[(s(!0),a(g,null,m(xe.value,(e,t)=>(s(),a("div",{key:t,class:"p-3 bg-gray-50 rounded-lg flex justify-between items-center"},[r("div",null,[r("div",X,i(e.title),1),r("div",Y,i(e.duration),1)]),r("div",Z,i(e.date),1)]))),128))]),r("button",{onClick:$e,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"}," 清空历史 ")])):l("",!0),r("div",ee,[r("div",te,[r("div",ne,i(fe.value),1),t[4]||(t[4]=r("div",{class:"text-sm text-gray-600"},"总倒计时",-1))]),r("div",oe,[r("div",ae,i(he.value),1),t[5]||(t[5]=r("div",{class:"text-sm text-gray-600"},"已完成",-1))]),r("div",se,[r("div",re,i(ke.value),1),t[6]||(t[6]=r("div",{class:"text-sm text-gray-600"},"总时长(小时)",-1))]),r("div",le,[r("div",ie,i(me.value?"运行中":"已停止"),1),t[7]||(t[7]=r("div",{class:"text-sm text-gray-600"},"当前状态",-1))])])]))}};export{de as default};
