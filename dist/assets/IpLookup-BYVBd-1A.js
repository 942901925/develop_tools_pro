import{r as a,c as s,k as o,l,m as e,n as t,t as n,u as i,z as p,A as u,F as r,q as c,j as d}from"./vendor-BOWHWpaN.js";import{u as v}from"./index-3NlzT2cr.js";import{s as g,G as y}from"./ui-DoE9cyLw.js";const k={class:"space-y-6"},m={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},x={class:"space-y-4"},b={class:"text-lg font-semibold text-gray-900"},f={class:"space-y-3"},L={class:"block text-sm font-medium text-gray-700"},h={class:"flex space-x-2"},w=["placeholder"],I=["disabled"],$=["disabled"],S={key:0,class:"space-y-3"},j={class:"font-medium text-gray-900"},C={class:"space-y-2"},q=["onClick"],P={class:"space-y-4"},A={class:"text-lg font-semibold text-gray-900"},_={key:0,class:"space-y-4"},z={class:"bg-white border border-gray-200 rounded-lg p-4"},N={class:"font-medium text-gray-900 mb-3"},O={class:"grid grid-cols-2 gap-3 text-sm"},T={class:"text-gray-500"},H={class:"ml-2 font-mono"},J={class:"text-gray-500"},U={class:"ml-2"},E={class:"text-gray-500"},F={class:"ml-2"},G={class:"text-gray-500"},M={class:"ml-2 font-mono"},R={class:"bg-white border border-gray-200 rounded-lg p-4"},V={class:"font-medium text-gray-900 mb-3"},B={class:"grid grid-cols-2 gap-3 text-sm"},D={class:"text-gray-500"},K={class:"ml-2"},Q={class:"text-gray-500"},W={class:"ml-2"},X={class:"text-gray-500"},Y={class:"ml-2"},Z={class:"text-gray-500"},aa={class:"ml-2"},sa={class:"col-span-2"},oa={class:"text-gray-500"},la={class:"ml-2 font-mono"},ea={class:"bg-white border border-gray-200 rounded-lg p-4"},ta={class:"font-medium text-gray-900 mb-3"},na={class:"grid grid-cols-2 gap-3 text-sm"},ia={class:"ml-2"},pa={class:"ml-2 font-mono"},ua={class:"text-gray-500"},ra={class:"ml-2"},ca={class:"ml-2"},da={class:"flex space-x-2"},va=["disabled"],ga={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ya={class:"flex items-center"},ka={class:"text-red-700"},ma={key:2,class:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center"},xa={class:"text-gray-500"},ba={__name:"IpLookup",setup(ba){const{t:fa}=v(),La=a(""),ha=a(null),wa=a(""),Ia=a(!1),$a=a([]),Sa=s(()=>/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(La.value)),ja=async()=>{Ia.value=!0,wa.value="";try{const a=await fetch("https://api.ipify.org?format=json"),s=await a.json();La.value=s.ip}catch(a){wa.value="获取本机 IP 失败"}finally{Ia.value=!1}},Ca=async()=>{if(Sa.value){Ia.value=!0,wa.value="",ha.value=null;try{const a=await fetch(`https://ipapi.co/${La.value}/json/`),s=await a.json();if(s.error)throw new Error(s.reason||"查询失败");ha.value=s,qa({ip:La.value,location:`${s.city||""} ${s.region||""} ${s.country||""}`.trim()})}catch(a){wa.value=a.message||"查询 IP 信息失败"}finally{Ia.value=!1}}},qa=a=>{$a.value=$a.value.filter(s=>s.ip!==a.ip),$a.value.unshift(a),$a.value.length>10&&($a.value=$a.value.slice(0,10)),localStorage.setItem("ip-lookup-history",JSON.stringify($a.value))},Pa=()=>{$a.value=[],localStorage.removeItem("ip-lookup-history")},Aa=()=>{if(!ha.value)return;const a=`IP: ${ha.value.ip}\n国家: ${ha.value.country||"未知"}\n地区: ${ha.value.region||"未知"}\n城市: ${ha.value.city||"未知"}\nISP: ${ha.value.org||"未知"}\n坐标: ${ha.value.loc||"未知"}`;navigator.clipboard.writeText(a).then(()=>{alert("IP 信息已复制到剪贴板")}).catch(()=>{alert("复制失败")})},_a=()=>{var a;if(!(null==(a=ha.value)?void 0:a.loc))return;const[s,o]=ha.value.loc.split(","),l=`https://www.google.com/maps?q=${s},${o}`;window.open(l,"_blank")};return(()=>{try{const a=localStorage.getItem("ip-lookup-history");a&&($a.value=JSON.parse(a))}catch(a){console.warn("加载历史记录失败:",a)}})(),(a,s)=>(l(),o("div",k,[e("div",m,[e("div",x,[e("h3",b,n(i(fa)("ipLookup.title")),1),e("div",f,[e("label",L,n(i(fa)("ipLookup.ipAddress")),1),e("div",h,[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>La.value=a),type:"text",placeholder:i(fa)("ipLookup.enterIpAddress"),class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,w),[[u,La.value]]),e("button",{onClick:ja,disabled:Ia.value,class:"btn-secondary whitespace-nowrap"},n(Ia.value?i(fa)("ipLookup.querying"):i(fa)("ipLookup.myIp")),9,I)])]),e("button",{onClick:Ca,disabled:!Sa.value||Ia.value,class:"btn-primary w-full"},n(Ia.value?i(fa)("ipLookup.querying"):i(fa)("ipLookup.queryIpInfo")),9,$),$a.value.length>0?(l(),o("div",S,[e("h4",j,n(i(fa)("ipLookup.searchHistory")),1),e("div",C,[(l(!0),o(r,null,c($a.value.slice(0,5),(a,s)=>(l(),o("button",{key:s,onClick:s=>(a=>{La.value=a.ip})(a),class:"w-full text-left px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded-md text-sm text-gray-700 transition-colors"},n(a.ip)+" - "+n(a.location||i(fa)("ipLookup.unknownLocation")),9,q))),128))]),e("button",{onClick:Pa,class:"text-sm text-red-600 hover:text-red-700"},n(i(fa)("ipLookup.clearHistory")),1)])):t("",!0)]),e("div",P,[e("h3",A,n(i(fa)("ipLookup.queryResult")),1),ha.value?(l(),o("div",_,[e("div",z,[e("h4",N,n(i(fa)("ipLookup.basicInfo")),1),e("div",O,[e("div",null,[e("span",T,n(i(fa)("ipLookup.ipAddress"))+":",1),e("span",H,n(ha.value.ip),1)]),e("div",null,[e("span",J,n(i(fa)("ipLookup.type"))+":",1),e("span",U,n(ha.value.type||i(fa)("ipLookup.unknown")),1)]),e("div",null,[e("span",E,n(i(fa)("ipLookup.version"))+":",1),e("span",F,n(ha.value.version||i(fa)("ipLookup.unknown")),1)]),e("div",null,[e("span",G,n(i(fa)("ipLookup.hostname"))+":",1),e("span",M,n(ha.value.hostname||i(fa)("ipLookup.none")),1)])])]),e("div",R,[e("h4",V,n(i(fa)("ipLookup.geoLocation")),1),e("div",B,[e("div",null,[e("span",D,n(i(fa)("ipLookup.country"))+":",1),e("span",K,n(ha.value.country||i(fa)("ipLookup.unknown")),1)]),e("div",null,[e("span",Q,n(i(fa)("ipLookup.region"))+":",1),e("span",W,n(ha.value.region||i(fa)("ipLookup.unknown")),1)]),e("div",null,[e("span",X,n(i(fa)("ipLookup.city"))+":",1),e("span",Y,n(ha.value.city||i(fa)("ipLookup.unknown")),1)]),e("div",null,[e("span",Z,n(i(fa)("ipLookup.postal"))+":",1),e("span",aa,n(ha.value.postal||i(fa)("ipLookup.unknown")),1)]),e("div",sa,[e("span",oa,n(i(fa)("ipLookup.coordinates"))+":",1),e("span",la,n(ha.value.loc||i(fa)("ipLookup.unknown")),1)])])]),e("div",ea,[e("h4",ta,n(i(fa)("ipLookup.networkInfo")),1),e("div",na,[e("div",null,[s[1]||(s[1]=e("span",{class:"text-gray-500"},"ISP:",-1)),e("span",ia,n(ha.value.org||i(fa)("ipLookup.unknown")),1)]),e("div",null,[s[2]||(s[2]=e("span",{class:"text-gray-500"},"ASN:",-1)),e("span",pa,n(ha.value.asn||i(fa)("ipLookup.unknown")),1)]),e("div",null,[e("span",ua,n(i(fa)("ipLookup.timezone"))+":",1),e("span",ra,n(ha.value.timezone||i(fa)("ipLookup.unknown")),1)]),e("div",null,[s[3]||(s[3]=e("span",{class:"text-gray-500"},"UTC:",-1)),e("span",ca,n(ha.value.utc_offset||i(fa)("ipLookup.unknown")),1)])])]),e("div",da,[e("button",{onClick:Aa,class:"btn-secondary flex-1"},n(i(fa)("ipLookup.copyInfo")),1),e("button",{onClick:_a,disabled:!ha.value.loc,class:"btn-primary flex-1"},n(i(fa)("ipLookup.viewOnMap")),9,va)])])):wa.value?(l(),o("div",ga,[e("div",ya,[d(i(g),{class:"w-5 h-5 text-red-500 mr-2"}),e("span",ka,n(wa.value),1)])])):(l(),o("div",ma,[d(i(y),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e("p",xa,n(i(fa)("ipLookup.enterIpToStart")),1)]))])])]))}};export{ba as default};
