import{r as e,c as a,k as t,l as r,m as s,n as l,C as o,t as n,u as c,D as i,L as d,M as u,F as m,q as p,p as g}from"./vendor-Bj4vQ21v.js";import{u as v}from"./index-D0OvHsGD.js";import"./ui-a1y1iJBQ.js";const h={class:"space-y-6"},b={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},x={class:"space-y-4"},y={class:"flex items-center justify-between"},f={class:"text-lg font-semibold text-gray-900"},j={class:"flex space-x-2"},S=["placeholder"],G={key:0,class:"text-red-600 text-sm"},k={class:"space-y-4"},O={class:"flex items-center justify-between"},w={class:"text-lg font-semibold text-gray-900"},C={class:"w-full h-64 p-4 bg-gray-100 border border-gray-300 rounded-lg overflow-auto text-sm"},J={class:"bg-gray-50 p-6 rounded-lg"},A={class:"text-lg font-semibold text-gray-900 mb-4"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},D={class:"space-y-4"},V={class:"block text-sm font-medium text-gray-700 mb-2"},U=["placeholder"],$={class:"block text-sm font-medium text-gray-700 mb-2"},q=["placeholder"],L={class:"space-y-4"},M={class:"flex items-center"},T={class:"flex items-center"},F={class:"flex items-center"},E={class:"space-y-4"},R={class:"text-lg font-semibold text-gray-900"},_={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z=["onClick"],B={class:"font-medium text-gray-900"},I={class:"text-sm text-gray-600 mt-1"},P={key:0,class:"space-y-4"},H={class:"text-lg font-semibold text-gray-900"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"block text-sm font-medium text-gray-700 mb-2"},W=["placeholder"],X={class:"text-sm font-medium text-gray-700 mb-2"},Y={class:"font-medium"},Z={key:0,class:"mt-2 text-sm"},ee={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ae={class:"bg-blue-50 p-4 rounded-lg text-center"},te={class:"text-2xl font-bold text-blue-600"},re={class:"text-sm text-gray-600"},se={class:"bg-green-50 p-4 rounded-lg text-center"},le={class:"text-2xl font-bold text-green-600"},oe={class:"text-sm text-gray-600"},ne={class:"bg-purple-50 p-4 rounded-lg text-center"},ce={class:"text-2xl font-bold text-purple-600"},ie={class:"text-sm text-gray-600"},de={class:"bg-orange-50 p-4 rounded-lg text-center"},ue={class:"text-2xl font-bold text-orange-600"},me={class:"text-sm text-gray-600"},pe={__name:"JsonSchemaGenerator",setup(pe){const{t:ge}=v(),ve=e(""),he=e(""),be=e(""),xe=e("Generated Schema"),ye=e("Auto-generated JSON Schema"),fe=e(!0),je=e(!0),Se=e(!1),Ge=e(""),ke=e({valid:!0,errors:[]}),Oe=a(()=>[{name:ge("jsonSchemaGenerator.examples.userObject.name"),description:ge("jsonSchemaGenerator.examples.userObject.description"),json:'{"id": 1, "name": "张三", "email": "zhang@example.com", "age": 25, "active": true}'},{name:ge("jsonSchemaGenerator.examples.productList.name"),description:ge("jsonSchemaGenerator.examples.productList.description"),json:'{"products": [{"id": 1, "name": "商品A", "price": 99.99, "inStock": true}, {"id": 2, "name": "商品B", "price": 149.99, "inStock": false}], "total": 2}'},{name:ge("jsonSchemaGenerator.examples.nestedConfig.name"),description:ge("jsonSchemaGenerator.examples.nestedConfig.description"),json:'{"database": {"host": "localhost", "port": 5432, "credentials": {"username": "admin", "password": "secret"}}, "cache": {"enabled": true, "ttl": 3600}}'}]),we=a(()=>{try{const e=JSON.parse(ve.value);return De(e)}catch{return 0}}),Ce=a(()=>{try{const e=JSON.parse(ve.value);return Ve(e)}catch{return 0}}),Je=()=>{try{const e=JSON.parse(ve.value),a=Ae(e);he.value=JSON.stringify(a,null,2),be.value=""}catch(e){be.value=ge("jsonSchemaGenerator.jsonFormatError")+": "+e.message,he.value=""}},Ae=(e,a="")=>{const t={$schema:"http://json-schema.org/draft-07/schema#",type:Ne(e),title:xe.value||"Generated Schema",description:ye.value||"Auto-generated JSON Schema"};if(null===e)return{...t,type:"null"};if(Array.isArray(e))if(0===e.length)t.items={type:"string"};else{const r=e.map(e=>Ne(e)),s=[...new Set(r)];1===s.length?t.items=Ae(e[0],a+"[]"):t.items={oneOf:s.map(e=>({type:e}))}}else if("object"==typeof e){const r={},s=[];for(const[t,l]of Object.entries(e))r[t]=Ae(l,a+"."+t),fe.value&&null!=l&&s.push(t),je.value&&(r[t].examples=[l]);t.properties=r,fe.value&&s.length>0&&(t.required=s)}else je.value&&(t.examples=[e]);return t},Ne=e=>null===e?"null":Array.isArray(e)?"array":"object"==typeof e?"object":"string"==typeof e?"string":"number"==typeof e?Number.isInteger(e)?"integer":"number":"boolean"==typeof e?"boolean":"string",De=e=>"object"!=typeof e||null===e?0:Array.isArray(e)?e.reduce((e,a)=>e+De(a),0):Object.keys(e).length+Object.values(e).reduce((e,a)=>e+De(a),0),Ve=(e,a=0)=>"object"!=typeof e||null===e?a:Array.isArray(e)?Math.max(a,...e.map(e=>Ve(e,a+1))):Math.max(a,...Object.values(e).map(e=>Ve(e,a+1))),Ue=()=>{try{const e=JSON.parse(Ge.value),a=JSON.parse(he.value),t=$e(e,a);ke.value=t}catch(e){ke.value={valid:!1,errors:["JSON格式错误: "+e.message]}}},$e=(e,a)=>{const t=[];if(a.type&&Ne(e)!==a.type&&t.push(`期望类型 ${a.type}，实际类型 ${Ne(e)}`),a.required&&"object"==typeof e&&null!==e)for(const r of a.required)r in e||t.push(`缺少必需字段: ${r}`);if(a.properties&&"object"==typeof e&&null!==e)for(const[r,s]of Object.entries(e))if(a.properties[r]){const e=$e(s,a.properties[r]);e.errors.length>0&&t.push(`字段 ${r}: ${e.errors.join(", ")}`)}return{valid:0===t.length,errors:t}},qe=()=>{ve.value="",he.value="",be.value="",Ge.value="",ke.value={valid:!0,errors:[]}},Le=async()=>{try{await navigator.clipboard.writeText(he.value)}catch(e){console.error("复制失败:",e)}};return(e,a)=>(r(),t("div",h,[s("div",b,[s("div",x,[s("div",y,[s("h3",f,n(c(ge)("jsonSchemaGenerator.jsonData")),1),s("div",j,[s("button",{onClick:Je,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},n(c(ge)("jsonSchemaGenerator.generateSchema")),1),s("button",{onClick:qe,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},n(c(ge)("jsonSchemaGenerator.clear")),1)])]),o(s("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>ve.value=e),placeholder:c(ge)("jsonSchemaGenerator.enterJsonData"),class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,S),[[i,ve.value]]),be.value?(r(),t("div",G,n(be.value),1)):l("",!0)]),s("div",k,[s("div",O,[s("h3",w,n(c(ge)("jsonSchemaGenerator.jsonSchema")),1),s("button",{onClick:Le,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"},n(c(ge)("jsonSchemaGenerator.copySchema")),1)]),s("pre",C,n(he.value),1)])]),s("div",J,[s("h3",A,n(c(ge)("jsonSchemaGenerator.schemaOptions")),1),s("div",N,[s("div",D,[s("div",null,[s("label",V,n(c(ge)("jsonSchemaGenerator.schemaTitle")),1),o(s("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>xe.value=e),placeholder:c(ge)("jsonSchemaGenerator.enterSchemaTitle"),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,U),[[i,xe.value]])]),s("div",null,[s("label",$,n(c(ge)("jsonSchemaGenerator.schemaDescription")),1),o(s("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>ye.value=e),placeholder:c(ge)("jsonSchemaGenerator.enterSchemaDescription"),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,q),[[i,ye.value]])])]),s("div",L,[s("div",null,[s("label",M,[o(s("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>fe.value=e),type:"checkbox",class:"mr-2"},null,512),[[u,fe.value]]),d(" "+n(c(ge)("jsonSchemaGenerator.includeRequired")),1)])]),s("div",null,[s("label",T,[o(s("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>je.value=e),type:"checkbox",class:"mr-2"},null,512),[[u,je.value]]),d(" "+n(c(ge)("jsonSchemaGenerator.includeExamples")),1)])]),s("div",null,[s("label",F,[o(s("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>Se.value=e),type:"checkbox",class:"mr-2"},null,512),[[u,Se.value]]),d(" "+n(c(ge)("jsonSchemaGenerator.strictMode")),1)])])])])]),s("div",E,[s("h3",R,n(c(ge)("jsonSchemaGenerator.exampleData")),1),s("div",_,[(r(!0),t(m,null,p(Oe.value,e=>(r(),t("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:a=>(e=>{ve.value=e.json,Je()})(e)},[s("div",B,n(e.name),1),s("div",I,n(e.description),1)],8,z))),128))])]),he.value?(r(),t("div",P,[s("h3",H,n(c(ge)("jsonSchemaGenerator.schemaValidation")),1),s("div",K,[s("div",null,[s("label",Q,n(c(ge)("jsonSchemaGenerator.testJsonData")),1),o(s("textarea",{"onUpdate:modelValue":a[6]||(a[6]=e=>Ge.value=e),placeholder:c(ge)("jsonSchemaGenerator.enterTestJsonData"),class:"w-full h-32 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,8,W),[[i,Ge.value]]),s("button",{onClick:Ue,class:"mt-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"},n(c(ge)("jsonSchemaGenerator.validateJson")),1)]),s("div",null,[s("div",X,n(c(ge)("jsonSchemaGenerator.validationResult")),1),s("div",{class:g(["p-4 rounded-lg",ke.value.valid?"bg-green-50 text-green-800":"bg-red-50 text-red-800"])},[s("div",Y,n(ke.value.valid?c(ge)("jsonSchemaGenerator.validationPassed"):c(ge)("jsonSchemaGenerator.validationFailed")),1),ke.value.errors.length>0?(r(),t("div",Z,[(r(!0),t(m,null,p(ke.value.errors,e=>(r(),t("div",{key:e,class:"mb-1"}," • "+n(e),1))),128))])):l("",!0)],2)])])])):l("",!0),s("div",ee,[s("div",ae,[s("div",te,n(ve.value.length),1),s("div",re,n(c(ge)("jsonSchemaGenerator.jsonCharCount")),1)]),s("div",se,[s("div",le,n(he.value.length),1),s("div",oe,n(c(ge)("jsonSchemaGenerator.schemaCharCount")),1)]),s("div",ne,[s("div",ce,n(we.value),1),s("div",ie,n(c(ge)("jsonSchemaGenerator.propertyCount")),1)]),s("div",de,[s("div",ue,n(Ce.value),1),s("div",me,n(c(ge)("jsonSchemaGenerator.nestingLevel")),1)])])]))}};export{pe as default};
