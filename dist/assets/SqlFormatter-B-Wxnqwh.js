import{r as e,c as s,k as t,l,m as a,n as r,C as o,t as n,u as i,D as c,F as d,q as g,p as m}from"./vendor-Bj4vQ21v.js";import{u}from"./index-D0OvHsGD.js";import"./ui-a1y1iJBQ.js";const p={class:"space-y-6"},v={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},x={class:"space-y-4"},y={class:"flex items-center justify-between"},E={class:"text-lg font-semibold text-gray-900"},b={class:"flex space-x-2"},h=["placeholder"],N={key:0,class:"text-red-600 text-sm"},f={class:"space-y-4"},I={class:"flex items-center justify-between"},O={class:"text-lg font-semibold text-gray-900"},R={class:"w-full h-64 p-4 bg-gray-100 border border-gray-300 rounded-lg overflow-auto text-sm"},q={key:0,class:"space-y-4"},F={class:"text-lg font-semibold text-gray-900"},T={class:"font-medium"},C={key:0,class:"mt-2 text-sm"},S={class:"space-y-4"},L={class:"text-lg font-semibold text-gray-900"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},k=["onClick"],D={class:"font-medium text-gray-900"},w={class:"text-sm text-gray-600 mt-1"},A={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},J={class:"bg-blue-50 p-4 rounded-lg text-center"},H={class:"text-2xl font-bold text-blue-600"},M={class:"bg-green-50 p-4 rounded-lg text-center"},j={class:"text-2xl font-bold text-green-600"},B={class:"bg-purple-50 p-4 rounded-lg text-center"},G={class:"text-2xl font-bold text-purple-600"},V={class:"bg-orange-50 p-4 rounded-lg text-center"},W={class:"text-2xl font-bold text-orange-600"},Y={__name:"SqlFormatter",setup(Y){const{t:Q}=u(),P=e(""),_=e(""),K=e(""),z=e(null),X=s(()=>[{name:Q("sqlFormatter.examples.selectQuery.name"),description:Q("sqlFormatter.examples.selectQuery.description"),sql:"SELECT id, name, email FROM users WHERE age > 18 ORDER BY name ASC LIMIT 10;"},{name:Q("sqlFormatter.examples.joinQuery.name"),description:Q("sqlFormatter.examples.joinQuery.description"),sql:"SELECT u.name, p.title FROM users u JOIN posts p ON u.id = p.user_id WHERE u.active = 1;"},{name:Q("sqlFormatter.examples.complexQuery.name"),description:Q("sqlFormatter.examples.complexQuery.description"),sql:"SELECT department, COUNT(*) as employee_count FROM employees WHERE salary > (SELECT AVG(salary) FROM employees) GROUP BY department HAVING COUNT(*) > 5 ORDER BY employee_count DESC;"},{name:Q("sqlFormatter.examples.insertStatement.name"),description:Q("sqlFormatter.examples.insertStatement.description"),sql:'INSERT INTO users (name, email, age) VALUES ("John Doe", "john@example.com", 25), ("Jane Smith", "jane@example.com", 30);'}]),Z=s(()=>(_.value.match(/SELECT|INSERT|UPDATE|DELETE|CREATE|DROP|ALTER/gi)||[]).length),$=s(()=>0===P.value.length?0:Math.round(_.value.length/P.value.length*100)),ee=()=>{try{const e=P.value.trim();if(!e)return;let s=e.replace(/\s+/g," ").replace(/\s*,\s*/g,",\n  ").replace(/\s*FROM\s+/gi,"\nFROM ").replace(/\s*WHERE\s+/gi,"\nWHERE ").replace(/\s*JOIN\s+/gi,"\nJOIN ").replace(/\s*LEFT JOIN\s+/gi,"\nLEFT JOIN ").replace(/\s*RIGHT JOIN\s+/gi,"\nRIGHT JOIN ").replace(/\s*INNER JOIN\s+/gi,"\nINNER JOIN ").replace(/\s*GROUP BY\s+/gi,"\nGROUP BY ").replace(/\s*HAVING\s+/gi,"\nHAVING ").replace(/\s*ORDER BY\s+/gi,"\nORDER BY ").replace(/\s*LIMIT\s+/gi,"\nLIMIT ").replace(/\s*UNION\s+/gi,"\nUNION ").replace(/\s*AND\s+/gi,"\n  AND ").replace(/\s*OR\s+/gi,"\n  OR ").replace(/\s*IN\s*\(/gi," IN (").replace(/\s*NOT IN\s*\(/gi," NOT IN (").replace(/\s*BETWEEN\s+/gi," BETWEEN ").replace(/\s*LIKE\s+/gi," LIKE ").replace(/\s*IS NULL\b/gi," IS NULL").replace(/\s*IS NOT NULL\b/gi," IS NOT NULL").replace(/\s*;\s*/g,";\n").trim();formattedCss.value=s,K.value="",te()}catch(e){K.value=Q("sqlFormatter.formatFailed")+": "+e.message,formattedCss.value=""}},se=()=>{try{const e=P.value.trim();if(!e)return;let s=e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/\s*,\s*/g,",").replace(/\s*;\s*/g,";").trim();formattedCss.value=s,K.value="",te()}catch(e){K.value="压缩失败: "+e.message,formattedCss.value=""}},te=()=>{const e=formattedCss.value,s=[];(e.match(/\(/g)||[]).length!==(e.match(/\)/g)||[]).length&&s.push("括号不匹配");const t=(e.match(/'/g)||[]).length,l=(e.match(/"/g)||[]).length;t%2!=0&&s.push("单引号未闭合"),l%2!=0&&s.push("双引号未闭合"),z.value={valid:0===s.length,errors:s}},le=()=>{P.value="",formattedCss.value="",K.value="",z.value=null},ae=async()=>{try{await navigator.clipboard.writeText(formattedCss.value)}catch(e){console.error("复制失败:",e)}};return(e,s)=>(l(),t("div",p,[a("div",v,[a("div",x,[a("div",y,[a("h3",E,n(i(Q)("sqlFormatter.sqlInput")),1),a("div",b,[a("button",{onClick:ee,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},n(i(Q)("sqlFormatter.format")),1),a("button",{onClick:se,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"},n(i(Q)("sqlFormatter.minify")),1),a("button",{onClick:le,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},n(i(Q)("sqlFormatter.clear")),1)])]),o(a("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>P.value=e),placeholder:i(Q)("sqlFormatter.enterSqlStatement"),class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,h),[[c,P.value]]),K.value?(l(),t("div",N,n(K.value),1)):r("",!0)]),a("div",f,[a("div",I,[a("h3",O,n(i(Q)("sqlFormatter.formatResult")),1),a("button",{onClick:ae,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"},n(i(Q)("sqlFormatter.copyResult")),1)]),a("pre",R,n(_.value),1)])]),z.value?(l(),t("div",q,[a("h3",F,n(i(Q)("sqlFormatter.sqlValidation")),1),a("div",{class:m(["p-4 rounded-lg",z.value.valid?"bg-green-50 text-green-800":"bg-red-50 text-red-800"])},[a("div",T,n(z.value.valid?i(Q)("sqlFormatter.sqlSyntaxCorrect"):i(Q)("sqlFormatter.sqlSyntaxError")),1),z.value.errors.length>0?(l(),t("div",C,[(l(!0),t(d,null,g(z.value.errors,e=>(l(),t("div",{key:e,class:"mb-1"}," • "+n(e),1))),128))])):r("",!0)],2)])):r("",!0),a("div",S,[a("h3",L,n(i(Q)("sqlFormatter.exampleSql")),1),a("div",U,[(l(!0),t(d,null,g(X.value,e=>(l(),t("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:s=>(e=>{P.value=e.sql,ee()})(e)},[a("div",D,n(e.name),1),a("div",w,n(e.description),1)],8,k))),128))])]),a("div",A,[a("div",J,[a("div",H,n(P.value.length),1),s[1]||(s[1]=a("div",{class:"text-sm text-gray-600"},"原始字符",-1))]),a("div",M,[a("div",j,n(_.value.length),1),s[2]||(s[2]=a("div",{class:"text-sm text-gray-600"},"格式化字符",-1))]),a("div",B,[a("div",G,n(Z.value),1),s[3]||(s[3]=a("div",{class:"text-sm text-gray-600"},"查询数量",-1))]),a("div",V,[a("div",W,n($.value)+"%",1),s[4]||(s[4]=a("div",{class:"text-sm text-gray-600"},"压缩比",-1))])])]))}};export{Y as default};
