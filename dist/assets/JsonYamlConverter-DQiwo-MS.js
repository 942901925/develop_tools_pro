import{r as e,c as t,k as l,l as s,m as a,z as r,n,A as o,t as i,F as c,q as u}from"./vendor-BAdfJYHu.js";const d={class:"space-y-6"},g={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},v={class:"space-y-4"},p={key:0,class:"text-red-600 text-sm"},x={class:"space-y-4"},m={class:"w-full h-64 p-4 bg-gray-100 border border-gray-300 rounded-lg overflow-auto text-sm"},y={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},b={class:"space-y-4"},f={key:0,class:"text-red-600 text-sm"},h={class:"space-y-4"},w={class:"w-full h-64 p-4 bg-gray-100 border border-gray-300 rounded-lg overflow-auto text-sm"},j={class:"space-y-4"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A=["onClick"],S={class:"font-medium text-gray-900"},k={class:"text-sm text-gray-600 mt-1"},J={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},O={class:"bg-blue-50 p-4 rounded-lg text-center"},C={class:"text-2xl font-bold text-blue-600"},M={class:"bg-green-50 p-4 rounded-lg text-center"},Y={class:"text-2xl font-bold text-green-600"},L={class:"bg-purple-50 p-4 rounded-lg text-center"},$={class:"text-2xl font-bold text-purple-600"},z={class:"bg-orange-50 p-4 rounded-lg text-center"},F={class:"text-2xl font-bold text-orange-600"},W={__name:"JsonYamlConverter",setup(W){const T=e(""),U=e(""),V=e(""),_=e(""),q=e(""),E=e(""),I=e([{name:"简单对象",description:"基本的JSON对象示例",json:'{"name": "张三", "age": 25, "city": "北京"}',yaml:"name: 张三\nage: 25\ncity: 北京"},{name:"嵌套对象",description:"包含嵌套结构的对象",json:'{"user": {"name": "李四", "profile": {"email": "li@example.com", "phone": "13800138000"}}, "settings": {"theme": "dark", "language": "zh-CN"}}',yaml:'user:\n  name: 李四\n  profile:\n    email: li@example.com\n    phone: "13800138000"\nsettings:\n  theme: dark\n  language: zh-CN'},{name:"数组数据",description:"包含数组的JSON数据",json:'{"items": ["苹果", "香蕉", "橙子"], "counts": [5, 3, 8], "metadata": {"total": 16, "categories": ["水果"]}}',yaml:"items:\n  - 苹果\n  - 香蕉\n  - 橙子\ncounts:\n  - 5\n  - 3\n  - 8\nmetadata:\n  total: 16\n  categories:\n    - 水果"}]),B=t(()=>0===T.value.length||0===U.value.length?0:Math.round(U.value.length/T.value.length*100)),D=t(()=>!(!q.value&&!E.value)),G=()=>{try{const e=JSON.parse(T.value);U.value=K(e),q.value=""}catch(e){q.value="JSON格式错误: "+e.message,U.value=""}},H=()=>{try{const e=P(V.value);_.value=JSON.stringify(e,null,2),E.value=""}catch(e){E.value="YAML格式错误: "+e.message,_.value=""}},K=(e,t=0)=>{const l="  ".repeat(t);if(null===e)return"null";if("string"==typeof e)return`"${e}"`;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(Array.isArray(e))return 0===e.length?"[]":e.map(e=>`${l}- ${K(e,t+1)}`).join("\n");if("object"==typeof e){const s=Object.entries(e);return 0===s.length?"{}":s.map(([e,s])=>{const a=K(s,t+1);return"object"!=typeof s||null===s||Array.isArray(s)?`${l}${e}: ${a}`:`${l}${e}:\n${a}`}).join("\n")}return e.toString()},P=e=>{const t=e.split("\n"),l={},s=[{obj:l,indent:-1}];for(const a of t){if(""===a.trim())continue;const e=a.search(/\S/),t=a.trim();for(;s.length>1&&s[s.length-1].indent>=e;)s.pop();const l=s[s.length-1].obj;if(t.startsWith("- ")){if(!Array.isArray(l))throw new Error("Invalid YAML: array item in non-array context");const e=Q(t.substring(2));l.push(e)}else if(t.includes(":")){const[a,...r]=t.split(":"),n=a.trim(),o=r.join(":").trim();if(""===o){const t={};l[n]=t,s.push({obj:t,indent:e})}else l[n]=Q(o)}}return l},Q=e=>"null"===(e=e.trim())?null:"true"===e||"false"!==e&&(e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):isNaN(e)||isNaN(parseFloat(e))?e:parseFloat(e)),R=()=>{T.value="",U.value="",q.value=""},X=()=>{V.value="",_.value="",E.value=""},Z=async()=>{try{await navigator.clipboard.writeText(U.value)}catch(e){console.error("复制失败:",e)}},ee=async()=>{try{await navigator.clipboard.writeText(_.value)}catch(e){console.error("复制失败:",e)}};return(e,t)=>(s(),l("div",d,[a("div",g,[a("div",v,[a("div",{class:"flex items-center justify-between"},[t[2]||(t[2]=a("h3",{class:"text-lg font-semibold text-gray-900"},"JSON 输入",-1)),a("div",{class:"flex space-x-2"},[a("button",{onClick:G,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," JSON → YAML "),a("button",{onClick:R,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"}," 清空 ")])]),r(a("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),placeholder:"请输入JSON数据...",class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[o,T.value]]),q.value?(s(),l("div",p,i(q.value),1)):n("",!0)]),a("div",x,[a("div",{class:"flex items-center justify-between"},[t[3]||(t[3]=a("h3",{class:"text-lg font-semibold text-gray-900"},"YAML 输出",-1)),a("button",{onClick:Z,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"}," 复制YAML ")]),a("pre",m,i(U.value),1)])]),a("div",y,[a("div",b,[a("div",{class:"flex items-center justify-between"},[t[4]||(t[4]=a("h3",{class:"text-lg font-semibold text-gray-900"},"YAML 输入",-1)),a("div",{class:"flex space-x-2"},[a("button",{onClick:H,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," YAML → JSON "),a("button",{onClick:X,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"}," 清空 ")])]),r(a("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>V.value=e),placeholder:"请输入YAML数据...",class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,512),[[o,V.value]]),E.value?(s(),l("div",f,i(E.value),1)):n("",!0)]),a("div",h,[a("div",{class:"flex items-center justify-between"},[t[5]||(t[5]=a("h3",{class:"text-lg font-semibold text-gray-900"},"JSON 输出",-1)),a("button",{onClick:ee,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"}," 复制JSON ")]),a("pre",w,i(_.value),1)])]),a("div",j,[t[6]||(t[6]=a("h3",{class:"text-lg font-semibold text-gray-900"},"示例数据",-1)),a("div",N,[(s(!0),l(c,null,u(I.value,e=>(s(),l("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:t=>(e=>{T.value=e.json,V.value=e.yaml,G(),H()})(e)},[a("div",S,i(e.name),1),a("div",k,i(e.description),1)],8,A))),128))])]),a("div",J,[a("div",O,[a("div",C,i(T.value.length),1),t[7]||(t[7]=a("div",{class:"text-sm text-gray-600"},"JSON字符数",-1))]),a("div",M,[a("div",Y,i(V.value.length),1),t[8]||(t[8]=a("div",{class:"text-sm text-gray-600"},"YAML字符数",-1))]),a("div",L,[a("div",$,i(B.value)+"%",1),t[9]||(t[9]=a("div",{class:"text-sm text-gray-600"},"转换比",-1))]),a("div",z,[a("div",F,i(D.value?"有错误":"正常"),1),t[10]||(t[10]=a("div",{class:"text-sm text-gray-600"},"状态",-1))])])]))}};export{W as default};
