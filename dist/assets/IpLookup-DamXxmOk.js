import{r as a,c as l,k as s,l as e,m as t,n as o,z as r,A as n,t as c,F as i,q as u,j as d,u as v}from"./vendor-VsQ_eVXY.js";import{AlertCircle as p,Globe as g}from"./ui-cmpKH9cm.js";const y={class:"space-y-6"},m={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},x={class:"space-y-4"},b={class:"space-y-3"},f={class:"flex space-x-2"},h=["disabled"],w=["disabled"],k={key:0,class:"space-y-3"},I={class:"space-y-2"},P=["onClick"],$={class:"space-y-4"},C={key:0,class:"space-y-4"},S={class:"bg-white border border-gray-200 rounded-lg p-4"},j={class:"grid grid-cols-2 gap-3 text-sm"},_={class:"ml-2 font-mono"},N={class:"ml-2"},q={class:"ml-2"},z={class:"ml-2 font-mono"},A={class:"bg-white border border-gray-200 rounded-lg p-4"},J={class:"grid grid-cols-2 gap-3 text-sm"},O={class:"ml-2"},T={class:"ml-2"},U={class:"ml-2"},E={class:"ml-2"},F={class:"col-span-2"},L={class:"ml-2 font-mono"},V={class:"bg-white border border-gray-200 rounded-lg p-4"},B={class:"grid grid-cols-2 gap-3 text-sm"},D={class:"ml-2"},G={class:"ml-2 font-mono"},H={class:"ml-2"},K={class:"ml-2"},M={class:"flex space-x-2"},Q=["disabled"],R={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},W={class:"flex items-center"},X={class:"text-red-700"},Y={key:2,class:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center"},Z={__name:"IpLookup",setup(Z){const aa=a(""),la=a(null),sa=a(""),ea=a(!1),ta=a([]),oa=l(()=>/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(aa.value)),ra=async()=>{ea.value=!0,sa.value="";try{const a=await fetch("https://api.ipify.org?format=json"),l=await a.json();aa.value=l.ip}catch(a){sa.value="获取本机 IP 失败"}finally{ea.value=!1}},na=async()=>{if(oa.value){ea.value=!0,sa.value="",la.value=null;try{const a=await fetch(`https://ipapi.co/${aa.value}/json/`),l=await a.json();if(l.error)throw new Error(l.reason||"查询失败");la.value=l,ca({ip:aa.value,location:`${l.city||""} ${l.region||""} ${l.country||""}`.trim()})}catch(a){sa.value=a.message||"查询 IP 信息失败"}finally{ea.value=!1}}},ca=a=>{ta.value=ta.value.filter(l=>l.ip!==a.ip),ta.value.unshift(a),ta.value.length>10&&(ta.value=ta.value.slice(0,10)),localStorage.setItem("ip-lookup-history",JSON.stringify(ta.value))},ia=()=>{ta.value=[],localStorage.removeItem("ip-lookup-history")},ua=()=>{if(!la.value)return;const a=`IP: ${la.value.ip}\n国家: ${la.value.country||"未知"}\n地区: ${la.value.region||"未知"}\n城市: ${la.value.city||"未知"}\nISP: ${la.value.org||"未知"}\n坐标: ${la.value.loc||"未知"}`;navigator.clipboard.writeText(a).then(()=>{alert("IP 信息已复制到剪贴板")}).catch(()=>{alert("复制失败")})},da=()=>{var a;if(!(null==(a=la.value)?void 0:a.loc))return;const[l,s]=la.value.loc.split(","),e=`https://www.google.com/maps?q=${l},${s}`;window.open(e,"_blank")};return(()=>{try{const a=localStorage.getItem("ip-lookup-history");a&&(ta.value=JSON.parse(a))}catch(a){console.warn("加载历史记录失败:",a)}})(),(a,l)=>(e(),s("div",y,[t("div",m,[t("div",x,[l[3]||(l[3]=t("h3",{class:"text-lg font-semibold text-gray-900"},"IP 地址查询",-1)),t("div",b,[l[1]||(l[1]=t("label",{class:"block text-sm font-medium text-gray-700"},"IP 地址",-1)),t("div",f,[r(t("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>aa.value=a),type:"text",placeholder:"输入 IP 地址，如: 8.8.8.8",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[n,aa.value]]),t("button",{onClick:ra,disabled:ea.value,class:"btn-secondary whitespace-nowrap"},c(ea.value?"查询中...":"我的IP"),9,h)])]),t("button",{onClick:na,disabled:!oa.value||ea.value,class:"btn-primary w-full"},c(ea.value?"查询中...":"查询 IP 信息"),9,w),ta.value.length>0?(e(),s("div",k,[l[2]||(l[2]=t("h4",{class:"font-medium text-gray-900"},"查询历史",-1)),t("div",I,[(e(!0),s(i,null,u(ta.value.slice(0,5),(a,l)=>(e(),s("button",{key:l,onClick:l=>(a=>{aa.value=a.ip})(a),class:"w-full text-left px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded-md text-sm text-gray-700 transition-colors"},c(a.ip)+" - "+c(a.location||"未知位置"),9,P))),128))]),t("button",{onClick:ia,class:"text-sm text-red-600 hover:text-red-700"}," 清空历史 ")])):o("",!0)]),t("div",$,[l[21]||(l[21]=t("h3",{class:"text-lg font-semibold text-gray-900"},"查询结果",-1)),la.value?(e(),s("div",C,[t("div",S,[l[8]||(l[8]=t("h4",{class:"font-medium text-gray-900 mb-3"},"基本信息",-1)),t("div",j,[t("div",null,[l[4]||(l[4]=t("span",{class:"text-gray-500"},"IP 地址:",-1)),t("span",_,c(la.value.ip),1)]),t("div",null,[l[5]||(l[5]=t("span",{class:"text-gray-500"},"类型:",-1)),t("span",N,c(la.value.type||"未知"),1)]),t("div",null,[l[6]||(l[6]=t("span",{class:"text-gray-500"},"版本:",-1)),t("span",q,c(la.value.version||"未知"),1)]),t("div",null,[l[7]||(l[7]=t("span",{class:"text-gray-500"},"主机名:",-1)),t("span",z,c(la.value.hostname||"无"),1)])])]),t("div",A,[l[14]||(l[14]=t("h4",{class:"font-medium text-gray-900 mb-3"},"地理位置",-1)),t("div",J,[t("div",null,[l[9]||(l[9]=t("span",{class:"text-gray-500"},"国家:",-1)),t("span",O,c(la.value.country||"未知"),1)]),t("div",null,[l[10]||(l[10]=t("span",{class:"text-gray-500"},"地区:",-1)),t("span",T,c(la.value.region||"未知"),1)]),t("div",null,[l[11]||(l[11]=t("span",{class:"text-gray-500"},"城市:",-1)),t("span",U,c(la.value.city||"未知"),1)]),t("div",null,[l[12]||(l[12]=t("span",{class:"text-gray-500"},"邮编:",-1)),t("span",E,c(la.value.postal||"未知"),1)]),t("div",F,[l[13]||(l[13]=t("span",{class:"text-gray-500"},"坐标:",-1)),t("span",L,c(la.value.loc||"未知"),1)])])]),t("div",V,[l[19]||(l[19]=t("h4",{class:"font-medium text-gray-900 mb-3"},"网络信息",-1)),t("div",B,[t("div",null,[l[15]||(l[15]=t("span",{class:"text-gray-500"},"ISP:",-1)),t("span",D,c(la.value.org||"未知"),1)]),t("div",null,[l[16]||(l[16]=t("span",{class:"text-gray-500"},"ASN:",-1)),t("span",G,c(la.value.asn||"未知"),1)]),t("div",null,[l[17]||(l[17]=t("span",{class:"text-gray-500"},"时区:",-1)),t("span",H,c(la.value.timezone||"未知"),1)]),t("div",null,[l[18]||(l[18]=t("span",{class:"text-gray-500"},"UTC:",-1)),t("span",K,c(la.value.utc_offset||"未知"),1)])])]),t("div",M,[t("button",{onClick:ua,class:"btn-secondary flex-1"}," 复制信息 "),t("button",{onClick:da,disabled:!la.value.loc,class:"btn-primary flex-1"}," 在地图上查看 ",8,Q)])])):sa.value?(e(),s("div",R,[t("div",W,[d(v(p),{class:"w-5 h-5 text-red-500 mr-2"}),t("span",X,c(sa.value),1)])])):(e(),s("div",Y,[d(v(g),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l[20]||(l[20]=t("p",{class:"text-gray-500"},"输入 IP 地址开始查询",-1))]))])])]))}};export{Z as default};
