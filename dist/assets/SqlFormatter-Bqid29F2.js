import{r as e,c as s,k as l,l as t,m as a,n as r,C as n,D as c,t as o,F as i,q as g,p as d}from"./vendor-Cf-Dxv3i.js";const u={class:"space-y-6"},p={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},v={class:"space-y-4"},m={key:0,class:"text-red-600 text-sm"},x={class:"space-y-4"},E={class:"w-full h-64 p-4 bg-gray-100 border border-gray-300 rounded-lg overflow-auto text-sm"},b={key:0,class:"space-y-4"},N={class:"font-medium"},h={key:0,class:"mt-2 text-sm"},y={class:"space-y-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O=["onClick"],R={class:"font-medium text-gray-900"},f={class:"text-sm text-gray-600 mt-1"},L={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},T={class:"bg-blue-50 p-4 rounded-lg text-center"},C={class:"text-2xl font-bold text-blue-600"},S={class:"bg-green-50 p-4 rounded-lg text-center"},U={class:"text-2xl font-bold text-green-600"},k={class:"bg-purple-50 p-4 rounded-lg text-center"},D={class:"text-2xl font-bold text-purple-600"},J={class:"bg-orange-50 p-4 rounded-lg text-center"},w={class:"text-2xl font-bold text-orange-600"},A={__name:"SqlFormatter",setup(A){const F=e(""),H=e(""),M=e(""),B=e(null),G=e([{name:"SELECT查询",description:"基本的SELECT查询语句",sql:"SELECT id, name, email FROM users WHERE age > 18 ORDER BY name ASC LIMIT 10;"},{name:"JOIN查询",description:"多表关联查询",sql:"SELECT u.name, p.title FROM users u JOIN posts p ON u.id = p.user_id WHERE u.active = 1;"},{name:"复杂查询",description:"包含子查询和聚合函数",sql:"SELECT department, COUNT(*) as employee_count FROM employees WHERE salary > (SELECT AVG(salary) FROM employees) GROUP BY department HAVING COUNT(*) > 5 ORDER BY employee_count DESC;"},{name:"INSERT语句",description:"插入数据语句",sql:'INSERT INTO users (name, email, age) VALUES ("John Doe", "john@example.com", 25), ("Jane Smith", "jane@example.com", 30);'}]),q=s(()=>(H.value.match(/SELECT|INSERT|UPDATE|DELETE|CREATE|DROP|ALTER/gi)||[]).length),W=s(()=>0===F.value.length?0:Math.round(H.value.length/F.value.length*100)),Y=()=>{try{const e=F.value.trim();if(!e)return;let s=e.replace(/\s+/g," ").replace(/\s*,\s*/g,",\n  ").replace(/\s*FROM\s+/gi,"\nFROM ").replace(/\s*WHERE\s+/gi,"\nWHERE ").replace(/\s*JOIN\s+/gi,"\nJOIN ").replace(/\s*LEFT JOIN\s+/gi,"\nLEFT JOIN ").replace(/\s*RIGHT JOIN\s+/gi,"\nRIGHT JOIN ").replace(/\s*INNER JOIN\s+/gi,"\nINNER JOIN ").replace(/\s*GROUP BY\s+/gi,"\nGROUP BY ").replace(/\s*HAVING\s+/gi,"\nHAVING ").replace(/\s*ORDER BY\s+/gi,"\nORDER BY ").replace(/\s*LIMIT\s+/gi,"\nLIMIT ").replace(/\s*UNION\s+/gi,"\nUNION ").replace(/\s*AND\s+/gi,"\n  AND ").replace(/\s*OR\s+/gi,"\n  OR ").replace(/\s*IN\s*\(/gi," IN (").replace(/\s*NOT IN\s*\(/gi," NOT IN (").replace(/\s*BETWEEN\s+/gi," BETWEEN ").replace(/\s*LIKE\s+/gi," LIKE ").replace(/\s*IS NULL\b/gi," IS NULL").replace(/\s*IS NOT NULL\b/gi," IS NOT NULL").replace(/\s*;\s*/g,";\n").trim();formattedCss.value=s,M.value="",V()}catch(e){M.value="格式化失败: "+e.message,formattedCss.value=""}},Q=()=>{try{const e=F.value.trim();if(!e)return;let s=e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/\s*,\s*/g,",").replace(/\s*;\s*/g,";").trim();formattedCss.value=s,M.value="",V()}catch(e){M.value="压缩失败: "+e.message,formattedCss.value=""}},V=()=>{const e=formattedCss.value,s=[];(e.match(/\(/g)||[]).length!==(e.match(/\)/g)||[]).length&&s.push("括号不匹配");const l=(e.match(/'/g)||[]).length,t=(e.match(/"/g)||[]).length;l%2!=0&&s.push("单引号未闭合"),t%2!=0&&s.push("双引号未闭合"),B.value={valid:0===s.length,errors:s}},j=()=>{F.value="",formattedCss.value="",M.value="",B.value=null},P=async()=>{try{await navigator.clipboard.writeText(formattedCss.value)}catch(e){console.error("复制失败:",e)}};return(e,s)=>(t(),l("div",u,[a("div",p,[a("div",v,[a("div",{class:"flex items-center justify-between"},[s[1]||(s[1]=a("h3",{class:"text-lg font-semibold text-gray-900"},"SQL 输入",-1)),a("div",{class:"flex space-x-2"},[a("button",{onClick:Y,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," 格式化 "),a("button",{onClick:Q,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," 压缩 "),a("button",{onClick:j,class:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"}," 清空 ")])]),n(a("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>F.value=e),placeholder:"请输入SQL语句...",class:"w-full h-64 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,F.value]]),M.value?(t(),l("div",m,o(M.value),1)):r("",!0)]),a("div",x,[a("div",{class:"flex items-center justify-between"},[s[2]||(s[2]=a("h3",{class:"text-lg font-semibold text-gray-900"},"格式化结果",-1)),a("button",{onClick:P,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"}," 复制结果 ")]),a("pre",E,o(H.value),1)])]),B.value?(t(),l("div",b,[s[3]||(s[3]=a("h3",{class:"text-lg font-semibold text-gray-900"},"SQL验证",-1)),a("div",{class:d(["p-4 rounded-lg",B.value.valid?"bg-green-50 text-green-800":"bg-red-50 text-red-800"])},[a("div",N,o(B.value.valid?"✓ SQL语法正确":"✗ SQL语法错误"),1),B.value.errors.length>0?(t(),l("div",h,[(t(!0),l(i,null,g(B.value.errors,e=>(t(),l("div",{key:e,class:"mb-1"}," • "+o(e),1))),128))])):r("",!0)],2)])):r("",!0),a("div",y,[s[4]||(s[4]=a("h3",{class:"text-lg font-semibold text-gray-900"},"示例SQL",-1)),a("div",I,[(t(!0),l(i,null,g(G.value,e=>(t(),l("div",{key:e.name,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:s=>(e=>{F.value=e.sql,Y()})(e)},[a("div",R,o(e.name),1),a("div",f,o(e.description),1)],8,O))),128))])]),a("div",L,[a("div",T,[a("div",C,o(F.value.length),1),s[5]||(s[5]=a("div",{class:"text-sm text-gray-600"},"原始字符",-1))]),a("div",S,[a("div",U,o(H.value.length),1),s[6]||(s[6]=a("div",{class:"text-sm text-gray-600"},"格式化字符",-1))]),a("div",k,[a("div",D,o(q.value),1),s[7]||(s[7]=a("div",{class:"text-sm text-gray-600"},"查询数量",-1))]),a("div",J,[a("div",w,o(W.value)+"%",1),s[8]||(s[8]=a("div",{class:"text-sm text-gray-600"},"压缩比",-1))])])]))}};export{A as default};
